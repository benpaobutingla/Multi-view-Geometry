function [ S,ra,b ] = FormSystem( P )

S=zeros(5,6);
b=zeros(5,1);

S(1,1)=P(2,1)^2+P(2,2)^2;
S(2,1)=P(2,2)*P(3,2)+P(2,1)*P(3,1);
%S(3,1) =P(3,1)^2+P(3,2)^2 ;
S(3,1)=P(1,2)*P(3,2)+P(1,1)*P(3,1);
S(4,1) = P(1,1)^2+P(1,2)^2;
S(5,1) =P(1,2)*P(2,2)+P(1,1)*P(2,1) ;

S(1,2)=-1;
S(4,2)=-1;

S( 1,3)= P(2,4)*P(2,4);
S( 2,3)= P(2,4)*P(3,4);
%S( 3,3)= P(3,4)*P(3,4);
S(3,3)=P(1,4)*P(3,4);
S( 4,3)= P(1,4)*P(1,4);
S( 5,3)= P(1,4)*P(2,4);

S( 1,4)= -2*P(2,3)*P(2,4);
S( 2,4)= -P(2,4)*P(3,3)-P(2,3)*P(3,4);
%S( 3,4)= -2*P(3,3)*P(3,4);
S(3,4)=-P(1,3)*P(3,4)-P(1,4)*P(3,3);
S( 4,4)= -P(1,3)*P(1,4)-P(1,3)*P(1,4);
S( 5,4)= -P(1,3)*P(2,4)-P(1,4)*P(2,3);

S( 1,5)= -2*P(2,1)*P(2,4);
S( 2,5)= -P(2,4)*P(3,1)-P(2,1)*P(3,4);
%S( 3,5)= -2*P(3,1)*P(3,4);
S(3,5)=-P(1,4)*P(3,1)-P(1,1)*P(3,4);
S( 4,5)= -P(1,1)*P(1,4)-P(1,1)*P(1,4);
S( 5,5)= -P(1,4)*P(2,1)-P(1,1)*P(2,4);

S( 1,6)= -2*P(2,2)*P(2,4);
S( 2,6)= -P(2,4)*P(3,2)-P(2,2)*P(3,4);
%S( 3,6)= -2*P(3,2)*P(3,4);
S(3,6)=-P(1,4)*P(3,2)-P(1,2)*P(3,4);
S( 4,6)= -P(1,2)*P(1,4)-P(1,2)*P(1,4);
S( 5,6)= -P(1,2)*P(2,4)-P(1,4)*P(2,2);

b(1,1)=-P(2,3)*P(2,3);
b(2,1)=-P(2,3)*P(3,3);
%b(3,1)=-P(3,3)*P(3,3)+1;
b(3,1)= -P(1,3)*P(3,3);
b(4,1)=-P(1,3)*P(1,3);
b(5,1)=-P(1,3)*P(2,3);
ra=rank(S);
end

